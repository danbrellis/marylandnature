var sowbForms=window.sowbForms||{};sowbForms.setupVcWidgetForm=function(){var i,n=jQuery,t=n('[name="so_widget_class"]'),r=n(".siteorigin_widget_form_container"),s=!1;r.on("change",".siteorigin-widget-field",function(){s=!0;var e=sowbForms.getWidgetFormValues(r),o=t.val(),i=JSON.stringify({widget_class:o,widget_data:e});i=i.replace(/\\/g,"\\\\"),n('[name="so_widget_data"]').val(i)}),t.mousedown(function(){i=t.find("option:selected")}),t.on("change",function(e){if(!s||confirm(soWidgetsVC.confirmChangeWidget)){s=!1;var o={action:"sowb_vc_widget_render_form",widget:t.val()};n.post(soWidgetsVC.ajaxUrl,o,function(e){r.html(e),r.trigger("change")},"html")}else i.attr("selected",!0)}),vc.atts.sowb_json_escaped={parse:function(e){var o=this.content().find(".wpb_vc_param_value[name="+e.param_name+"]");return _.escape(_.escape(o.val().toString()).replace(/\[/g,"&#91;").replace(/\]/g,"&#93;"))},render:function(e,o){return _.unescape(_.unescape(o)).replace(/&#91;/g,"[").replace(/&#93;/g,"]")}},vc.events.on("shortcodeView:updated:siteorigin_widget_vc",function(){void 0!==vc.frame_window&&void 0!==vc.frame_window.sowb&&(0,vc.frame_window.jQuery)(vc.frame_window.sowb).trigger("setup_widgets",{preview:!0})})},jQuery(function(e){sowbForms.setupVcWidgetForm()}),window.sowbForms=sowbForms;