var sowbForms=window.sowbForms||{};sowbForms.setupVcWidgetForm=function(){var e=jQuery,o=e('[name="so_widget_class"]'),n=e(".siteorigin_widget_form_container"),t=!1;n.on("change",".siteorigin-widget-field",function(){t=!0;var i=sowbForms.getWidgetFormValues(n),r=o.val(),a=JSON.stringify({widget_class:r,widget_data:i});a=a.replace(/\\/g,"\\\\"),e('[name="so_widget_data"]').val(a)});var i;o.mousedown(function(){i=o.find("option:selected")}),o.on("change",function(r){if(t&&!confirm(soWidgetsVC.confirmChangeWidget))return void i.attr("selected",!0);t=!1;var a=o.val(),s={action:"sowb_vc_widget_render_form",widget:a};e.post(soWidgetsVC.ajaxUrl,s,function(e){n.html(e),n.trigger("change")},"html")}),vc.atts.sowb_json_escaped={parse:function(e){var o=this.content().find(".wpb_vc_param_value[name="+e.param_name+"]");return _.escape(_.escape(o.val().toString()).replace(/\[/g,"&#91;").replace(/\]/g,"&#93;"))},render:function(e,o){return _.unescape(_.unescape(o)).replace(/&#91;/g,"[").replace(/&#93;/g,"]")}},vc.events.on("shortcodeView:updated:siteorigin_widget_vc",function(){if("undefined"!=typeof vc.frame_window&&"undefined"!=typeof vc.frame_window.sowb){var e=vc.frame_window.jQuery,o=vc.frame_window.sowb;e(o).trigger("setup_widgets")}})},jQuery(function(e){sowbForms.setupVcWidgetForm()}),window.sowbForms=sowbForms;