{"version":3,"sources":["nhsm.js","jquery.fittext.js","init-foundation.js","wp-foundation.js","iframeResizer.js"],"names":["removeHash","scrollV","scrollH","loc","window","location","history","pushState","document","title","pathname","search","body","scrollTop","scrollLeft","hash","$","fn","fitText","kompressor","options","compressor","settings","extend","minFontSize","Number","NEGATIVE_INFINITY","maxFontSize","POSITIVE_INFINITY","this","each","$this","resizer","css","Math","max","min","width","parseFloat","on","jQuery","foundation","inViewport","$el","elH","outerHeight","H","height","r","getBoundingClientRect","t","top","b","bottom","set_icon_width","length","h","lineHeight","hasClass","texp","find","animate_scrolling_words","elem","next_elem","next","$cont","children","Foundation","Motion","animateOut","animateIn","setTimeout","cont_width","apply","map","get","onresize","ready","searchHandler","searchModal","e","stopPropagation","preventDefault","addClass","removeClass","calCont","cal","fullCalendar","view","event","element","appendToTitle","after","attr","ider","id","start","format","dropdownPane","tooltip","closest","href","nhsm_ajax","agenda_url","newPath","m","vars","split","data","action","active","security","cal_security","post","ajax_url","error","console","log","output","html","inputs","newSource","substr","remove","toCheck","replace","inArray","prop","checked","push","join","day","letters","splice","i","key","dom","bg","img_credit_security","items","JSON","stringify","credit","parent","append","position","left","iFrameResize","checkOrigin","reInit","last","innerWidth","innerHeight","wrap","undefined","getMutationObserver","MutationObserver","WebKitMutationObserver","MozMutationObserver","addEventListener","el","evt","func","removeEventListener","setupRequestAnimationFrame","x","vendors","requestAnimationFrame","getMyID","iframeId","retStr","self","parentIFrame","getId","formatLogHeader","msgId","isLogEnabled","logEnabled","msg","info","warn","type","enabled","iFrameListener","resizeIFrame","resize","setSize","messageData","setPagePosition","ensureInRange","syncResize","processMsg","msgIdLen","iframe","Dimension","dimension","toLowerCase","size","isMessageFromIFrame","checkAllowedOrigin","checkList","retCode","origin","checkSingle","remoteHost","constructor","Array","Error","isMessageForUs","isMessageFromMetaParent","true","false","getMsgBody","offset","indexOf","msgHeaderLen","forwardMsgFromIFrame","msgBody","message","parse","getPageInfo","bodyPosition","iFramePosition","iframeHeight","iframeWidth","clientHeight","documentElement","clientWidth","offsetTop","parseInt","offsetLeft","pageYOffset","pageXOffset","documentHeight","documentWidth","windowHeight","windowWidth","sendPageInfoToIframe","debouncedTrigger","trigger","debounceFrameEvents","startPageInfoMonitor","setListener","sendPageInfo","stop","forEach","stopPageInfo","stopPageInfoMonitor","checkIFrameExists","retBool","getElementPosition","target","getPagePosition","floor","pagePosition","y","scrollRequestFromChild","addOffset","reposition","newPosition","scrollTo","calcOffset","scrollParent","unsetPagePosition","findTarget","jumpToTarget","jumpPosition","jumpToParent","moveToAnchor","hashData","decodeURIComponent","getElementById","getElementsByName","funcName","val","chkEvent","actionMsg","firstRun","closeIFrame","autoResize","resetIFrame","hasSettings","iFrameReadyMsgReceived","createOutgoingMsg","loaded","retVal","TypeError","removeIframeListeners","parentNode","removeChild","reset","setDimension","style","chkZero","hiddenCheckEnabled","fixHiddenIFrames","processDimension","sizeHeight","sizeWidth","doNotSync","calleeMsg","noResponseWarning","postMessageToIFrame","targetOrigin","contentWindow","postMessage","iFrameNotFound","chkAndSend","warnOnNoResponse","warning","errorShown","warningTimeout","msgTimeout","bodyMarginV1","interval","enablePublicMethods","bodyMargin","heightCalculationMethod","bodyBackground","bodyPadding","tolerance","inPageLinks","resizeFrom","widthCalculationMethod","setupIFrame","setLimits","addStyle","Infinity","chkMinMax","newId","defaults","count","ensureHasId","src","setScrolling","scrolling","overflow","setupBodyMarginValues","checkReset","resetRequertMethod","resetRequiredMethods","setupIFrameObject","iFrameResizer","close","bind","removeListeners","anchor","sendMessage","init","iFrameLoaded","createDestroyObserver","destroyObserver","mutations","mutation","removedNodes","prototype","slice","call","removedNode","observe","childList","checkOptions","copyOptions","option","Object","hasOwnProperty","getTargetOrigin","depricate","splitName","name","charAt","toUpperCase","processOptions","keys","beenHere","debouce","time","timer","frameId","frameTimer","checkIFrames","checkIFrame","settingId","chkDimension","isVisible","offsetParent","mutationObserved","createMutationObserver","querySelector","config","attributes","attributeOldValue","characterData","characterDataOldValue","subtree","observer","resizeIFrames","sendTriggerMsg","tabVisible","visibilityState","eventName","isIFrameResizeEnabled","setupEventListeners","factory","chkType","tagName","iFrames","warnDeprecatedOptions","querySelectorAll","createJQueryPublicMethod","index","filter","end","msgHeader","scroll","bodyScroll","documentElementScroll","maxHeight","maxWidth","minHeight","minWidth","onClose","onClosed","onInit","onMessage","onResized","onScroll","define","amd","module","exports"],"mappings":"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","file":"scripts.min.js","sourcesContent":["// JavaScript Document\r\n\r\nfunction removeHash () { \r\n\tvar scrollV, scrollH, loc = window.location;\r\n\tif (\"pushState\" in history)\r\n\t\thistory.pushState(\"\", document.title, loc.pathname + loc.search);\r\n\telse {\r\n\t\t// Prevent scrolling by storing the page's current scroll offset\r\n\t\tscrollV = document.body.scrollTop;\r\n\t\tscrollH = document.body.scrollLeft;\r\n\r\n\t\tloc.hash = \"\";\r\n\r\n\t\t// Restore the scroll offset, should be flicker free\r\n\t\tdocument.body.scrollTop = scrollV;\r\n\t\tdocument.body.scrollLeft = scrollH;\r\n\t}\r\n}\r\n\r\n(function( $ ) {\r\n\t\r\n\t\"use strict\";\r\n\t\r\n\t//FitText on homepage\r\n\tif ($(\"body\").hasClass(\"home\") && $(\".collection\").length) {\r\n\t\t$(\".collection-info .collector\").fitText(1.2, { minFontSize: '10px', maxFontSize: '18px' });\r\n\t\t$(\".collection-info .collection-title\").fitText(1.2, { minFontSize: '14px', maxFontSize: '24px' });\r\n\t}\r\n\t\r\n\t//FitText on pages with .team-card\r\n\tif ($(\".team-card\").length) {\r\n\t\t$('.team-card').each(function(){\r\n\t\t\tvar texp = $(this).find(\".team-excerpt p\");\r\n\t\t\t$(this).on('hover', function(){\r\n\t\t\t\ttexp.css('font-size', Math.max(Math.min(texp.width() / (1.2*10), parseFloat(16)), parseFloat(10)));\r\n\t\t\t});\r\n\t\t\t\t\r\n\t\t\ttexp.fitText(1.2, { minFontSize: '10px', maxFontSize: '16px' });\r\n\t\t\t\r\n\t\t\t//console.log(texp.closest('.card-section'), texp.closest('.card-section').outerHeight());\r\n\t\t\t//texp.css('margin-top', (texp.closest('.card-section').height() - texp.height)/2);\r\n\t\t});\r\n\t}\r\n\t\r\n\t//Motion UI on Homepage\r\n\t//Motion UI\tconsole.log(Foundation.Motion.animateOut);\r\n\t(function nshm_homepage_mui(){\r\n\t\t\r\n\t\tfunction animate_scrolling_words(elem){\r\n\t\t\tvar next_elem;\r\n\t\t\tif(elem.next().length === 1){\r\n\t\t\t\tnext_elem = elem.next();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tnext_elem = $cont.children(\":first\");\r\n\t\t\t}\r\n\r\n\t\t\tif(inViewport($cont)){\r\n\t\t\t\tFoundation.Motion.animateOut(elem, 'slideUpAndOut', function() {\r\n\t\t\t\t\t//console.log(\"'\" + elem.text() + \"': out\");\r\n\t\t\t\t});\r\n\t\t\t\tFoundation.Motion.animateIn(next_elem, 'slideUpAndIn', function(){\r\n\t\t\t\t\t//console.log(\"'\" + next_elem.text() + \"': in\");\r\n\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\tanimate_scrolling_words(next_elem);\r\n\t\t\t\t\t}, 3000);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tanimate_scrolling_words(elem);\r\n\t\t\t\t}, 3000);\r\n\t\t\t}\r\n\t\t}\r\n\r\n    var $cont = $('.nhsm_scrolling_words');\r\n\t\t\r\n\t\tif($cont.length){\r\n\t\t\tvar cont_width = Math.max.apply(\r\n\t\t\t\tMath,\r\n\t\t\t\t$cont.children().map(function(){ \r\n\t\t\t\t\treturn $(this).width();\r\n\t\t\t\t}).get()\r\n\t\t\t);\r\n\t\t\t$cont.width(cont_width);\r\n\t\t\t//console.log(cont_width);\r\n\t\t\t$cont.children('li').css('width', cont_width);\r\n\r\n\t\t\tanimate_scrolling_words($cont.children(\":first\"));\r\n\t\t}\r\n\r\n\t}()); //auto-run\r\n\t\r\n\t//InViewport Plugin\r\n\t//thanks to http://stackoverflow.com/questions/24768795/get-the-visible-height-of-a-div-with-jquery/26831113#26831113\r\n\tfunction inViewport($el) {\r\n    var elH = $el.outerHeight(),\r\n        H   = $(window).height(),\r\n        r   = $el[0].getBoundingClientRect(), t=r.top, b=r.bottom;\r\n    return Math.max(0, t>0? Math.min(elH, H-t) : (b<H?b:H));\r\n\t}\r\n\t\r\n\t//Make map with .so-widget-sow-google-map full width\r\n\t/*var map = $(\".so-widget-sow-google-map\");\r\n\tvar windowwidth = $(window).width();\r\n\tmap.css({\r\n\t\twidth: windowwidth,\r\n\t\tmarginLeft: -((windowwidth - map.width()) / 2)\r\n\t});*/\r\n\t\r\n\t\r\n\t//set icon width based on height\r\n\tfunction set_icon_width(){\r\n\t\tif($('.nhsm-icon').length) {\r\n\t\t\t$('.nhsm-icon').each(function(){\r\n\t\t\t\tvar h = $(this).height();\r\n\t\t\t\t$(this).css({width:h, height: h, lineHeight: h+1+\"px\"});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tset_icon_width();\r\n\twindow.onresize = function() {\r\n\t\tset_icon_width();\r\n\t};\r\n\t\r\n\r\n})(jQuery);\r\n\r\njQuery( document ).ready( function( $ ) {\r\n\t\"use strict\";\r\n\t\r\n\t//Add search modal\r\n\tif($('.search-handler').length){\r\n\t\tvar searchHandler = $('.search-handler a');\r\n\t\tvar searchModal = $('#search-modal');\r\n\t\t\r\n\t\tsearchHandler.on('click', function(e){\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t\tsearchModal.foundation('open');\r\n\t\t});\r\n\t}\r\n\r\n    $(\"#off-canvas\").on(\"opened.zf.offcanvas\", function(e) {\r\n        setTimeout(function(){ $('.toci').addClass('open'); }, 50);\r\n    });\r\n    $(\"#off-canvas\").on(\"closed.zf.offcanvas\", function(e) {\r\n        setTimeout(function(){ $('.toci').removeClass('open'); }, 50);\r\n    });\r\n\t\r\n\t//Full calendar JS functions\r\n\tvar calCont = $('#events-full-calendar');\r\n\tif(calCont.length){\r\n\t\tvar cal = calCont.fullCalendar('getCalendar');\r\n\t\tvar view = calCont.find('.fc-view-container');\r\n\r\n\t\tcal.on('eventRender', function( event, element, view ) {\r\n\t\t\tif(event.appendToTitle !== false){\r\n\t\t\t\telement.find('.fc-content').after(event.appendToTitle);\r\n\t\t\t}\r\n\t\t\telement.attr('title', event.title);\r\n\t\t});\r\n\t\tcal.on('eventAfterRender', function(event, element, view) {\r\n\t\t\t//$(document).foundation();\r\n\t\t\tconst ider = 'dropdown' + event.id + '_' + event.start.format('X');\r\n\r\n\t\t\t//add dropdown pane\r\n\t\t\tvar dropdownPane = '<div class=\"dropdown-pane top large event-tooltip\" id=\"'+ider+'\" data-dropdown data-auto-focus=\"true\"><button class=\"close-button\" aria-label=\"Close event details\" type=\"button\"><span aria-hidden=\"true\">&times;</span></button>'+event.tooltip+'</div>';\r\n\t\t\t$(\"#events-full-calendar\").after( $(dropdownPane) );\r\n\t\t\telement.attr('data-toggle', ider); //@todo use event_id + occurance\r\n\t\t});\r\n\t\tcal.on('eventAfterAllRender', function(view){\r\n\t\t\t$(document).foundation();\r\n\t\t\t\r\n\t\t\t$('.dropdown-pane .close-button').on('click', function(){\r\n\t\t\t\t$(this).closest('.dropdown-pane').foundation('close');\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\t$('.fc-agendaview-button').on('click', function(){\r\n            window.location.href = nhsm_ajax.agenda_url;\r\n\t\t});\r\n\r\n\t\t$('.fc-center .fc-button').on('click', function(){\r\n\t\t\tvar newPath;\r\n\t\t\tvar hash = window.location.hash;\r\n\t\t\tvar m = calCont.fullCalendar( 'getDate' );\r\n\t\t\tvar pathname = window.location.pathname;\r\n\t\t\tvar vars = pathname.split('/');\r\n\t\t\tnewPath = '/' + vars[1] + '/' + vars[2] + '/' + m.format('YYYY[/]MM[/]');\r\n\t\t\tif(hash) newPath = newPath + hash;\r\n            window.history.pushState(null, null, newPath);\r\n\t\t});\r\n\r\n\t\tsetTimeout(function() {\r\n\t\t\tvar hash = window.location.hash;\r\n\t\t\tvar data = {\r\n\t\t\t\t'action': 'get_event_cat_filters',\r\n\t\t\t\t'active': 0,\r\n\t\t\t\t'security': nhsm_ajax.cal_security\r\n\t\t\t};\r\n\r\n\t\t\t//Setup cat filtering dropdown\r\n\t\t\t$.post(nhsm_ajax.ajax_url, data, function(r) {\r\n\t\t\t\t//console.log(r);\r\n\t\t\t\tif(r.error) {\r\n\t\t\t\t\tconsole.log(r.output);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tcalCont.find('.fc-right').html(r.output);\r\n\t\t\t\t}\r\n\t\t\t\t$(document).foundation();\r\n\t\t\t\tvar inputs = $('#event-cat-filter').find('input');\r\n\t\t\t\r\n\t\t\t\t//Refetch events if hash is present and precheck corresponding checkboxes\r\n\t\t\t\t//@todo work this into the PHP request on load so we don't have to refetch events\r\n\t\t\t\tif(hash){\r\n                    view.addClass('loading');\r\n\t\t\t\t\tvar newSource = nhsm_ajax.ajax_url + '?action=get_events&cats=' + hash.substr(1);\r\n\t\t\t\t\t$('.event-tooltip').remove();\r\n\t\t\t\t\tcalCont.fullCalendar('removeEventSources');\r\n\t\t\t\t\tcalCont.fullCalendar('removeEvents');\r\n\t\t\t\t\tcalCont.fullCalendar('addEventSource', newSource);\r\n\r\n\t\t\t\t\tvar toCheck = hash.replace('#', '').split('+');\r\n\t\t\t\t\tinputs.each(function(){\r\n\t\t\t\t\t\tif($.inArray($(this).attr('id').replace('cat_',''), toCheck) > -1){\r\n\t\t\t\t\t\t\t$(this).prop(\"checked\", true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t//Listen for checkboxes to be checked\r\n\t\t\t\tinputs.on('change', function(e){\r\n                    view.addClass('loading');\r\n\r\n\t\t\t\t\t//gather all checked\r\n\t\t\t\t\tvar checked = [];\r\n\t\t\t\t\tinputs.each(function(){\r\n\t\t\t\t\t\tif($(this).prop('checked')) checked.push($(this).attr('id').replace('cat_',''));\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif(checked.length > 0) {\r\n\t\t\t\t\t\twindow.location.hash=checked.join('+');\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tremoveHash();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar newSource = nhsm_ajax.ajax_url + '?action=get_events&cats=' + checked.join('+');\r\n\t\t\t\t\t$('.event-tooltip').remove();\r\n\t\t\t\t\tcalCont.fullCalendar('removeEventSources');\r\n\t\t\t\t\tcalCont.fullCalendar('removeEvents');\r\n\t\t\t\t\tcalCont.fullCalendar('addEventSource', newSource);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\r\n\t\t\tcalCont.fullCalendar('rerenderEvents');\r\n\t\t});\r\n\r\n        $('.fc-day-header span').each(function(){\r\n        \tvar day = $(this).html();\r\n        \tvar letters = day.split('');\r\n        \tletters.splice(3, 0, '<span class=\"show-for-large\">');\r\n        \tletters.push('</span>');\r\n        \t$(this).html(letters.join(''));\r\n\t\t});\r\n\r\n        cal.on('eventsReceived', function(){\r\n            view.removeClass('loading');\r\n\t\t});\r\n\t}\r\n\r\n\t//old code (#calendar no longer used, replaced with #events-full-calendar)\r\n\t/*\r\n\tif($('#calendar').length){\r\n\t\t$('#calendar').fullCalendar({\r\n\t\t\teventLimit: true,\r\n\t\t\theader: {\r\n\t\t\t\tleft: 'prev,next today',\r\n\t\t\t\tcenter: 'title',\r\n\t\t\t\tright: 'month,agendaWeek,agendaDay,listWeek'\r\n\t\t\t},\r\n\t\t\tnavLinks: true,\r\n\t\t\teventSources: [\r\n\t\t\t\t{\r\n\t\t\t\t\turl: fc.endpoint,\r\n\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\tcolor: '#666666',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tstart: fc.start,\r\n\t\t\t\t\t\tend: fc.end,\r\n\t\t\t\t\t\tcats: fc.cat_ids,\r\n\t\t\t\t\t\ttopics: fc.topics\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror: function() {\r\n\t\t\t\t\t\talert('there was an error while fetching events!');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\teventRender: function( event, element, view ) {\r\n\t\t\t\tif(event.appendToTitle !== false)\r\n\t\t\t\t\telement.find('.fc-content').after(event.appendToTitle); \r\n\t\t\t},\r\n\t\t\teventAfterRender: function(event, element, view) {\r\n\t\t\t\t//$(document).foundation();\r\n\r\n\t\t\t\t//add dropdown pane\r\n\t\t\t\tvar dropdownPane = '<div class=\"dropdown-pane top large\" id=\"dropdown'+event.id+'\" data-dropdown data-auto-focus=\"true\"><button class=\"close-button\" aria-label=\"Close event details\" type=\"button\"><span aria-hidden=\"true\">&times;</span></button>'+event.tooltip+'</div>';\r\n\t\t\t\t$(\"#calendar\").after( $(dropdownPane) );\r\n\t\t\t\telement.attr('data-toggle', 'dropdown'+event.id);\r\n\t\t\t},\r\n\t\t\teventAfterAllRender: function(view){\r\n\t\t\t\t$(document).foundation();\r\n\t\t\t\t$('.dropdown-pane .close-button').on('click', function(){\r\n\t\t\t\t\t$(this).closest('.dropdown-pane').foundation('close');\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\teventClick: function(calEvent, jsEvent, view) {\r\n\t\t\t\t//jsEvent.preventDefault();\r\n\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t*/\r\n\r\n\t//add credits/captions to images\r\n\tif($('.add_caption_to_bg').length){\r\n\t\tvar map = [];\r\n        $('.add_caption_to_bg').each(function(i){\r\n\t\t\tmap.push({\r\n                key: i,\r\n\t\t\t\tdom: $(this),\r\n\t\t\t\tbg: $(this).css('background-image').replace('url(','').replace(')','').replace(/\\\"/gi, \"\")\r\n            });\r\n\t\t});\r\n\t\tif(map.length > 0){\r\n\t\t\tvar data = {\r\n                'action': 'get_img_credit',\r\n                'security': nhsm_ajax.img_credit_security,\r\n                'items': JSON.stringify(map)\r\n            };\r\n\t\t\t$.post(nhsm_ajax.ajax_url, data, function(r) {\r\n                if (r.error) {\r\n                    console.log(r.output);\r\n                }\r\n                else {\r\n                \t$.each(map, function(i){\r\n                \t\tvar credit = $(r.output[i]);\r\n                \t\tvar parent = map[i].dom;\r\n                        parent.append(credit);\r\n                \t\tcredit.css('right', parent.position().left);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n            });\r\n        }\r\n\r\n        //Setup cat filtering dropdown\r\n        /*\r\n\r\n        */\r\n\t}\r\n\t\r\n\t//Cross domain iframe height (used for wildapricot widgets)\r\n\tif ($(\".wildapricotframe\").length){\r\n\t\t$('.wildapricotframe').iFrameResize( [{'checkOrigin': false, 'log': true}] );\r\n\t}\r\n\t\r\n\t$('.tabs').on('change.zf.tabs', function() {\r\n\t\tFoundation.reInit('equalizer');\r\n\t});\r\n});","/*global jQuery */\r\n/*!\r\n* FitText.js 1.2\r\n*\r\n* Copyright 2011, Dave Rupert http://daverupert.com\r\n* Released under the WTFPL license\r\n* http://sam.zoy.org/wtfpl/\r\n*\r\n* Date: Thu May 05 14:23:00 2011 -0600\r\n*/\r\n\r\n(function( $ ){\r\n\r\n  $.fn.fitText = function( kompressor, options ) {\r\n\r\n    // Setup options\r\n    var compressor = kompressor || 1,\r\n        settings = $.extend({\r\n          'minFontSize' : Number.NEGATIVE_INFINITY,\r\n          'maxFontSize' : Number.POSITIVE_INFINITY\r\n        }, options);\r\n\r\n    return this.each(function(){\r\n\r\n      // Store the object\r\n      var $this = $(this);\r\n\r\n      // Resizer() resizes items based on the object width divided by the compressor * 10\r\n      var resizer = function () {\r\n        $this.css('font-size', Math.max(Math.min($this.width() / (compressor*10), parseFloat(settings.maxFontSize)), parseFloat(settings.minFontSize)));\r\n      };\r\n\r\n      // Call once to set.\r\n      resizer();\r\n\r\n      // Call on resize. Opera debounces their resize by default.\r\n      $(window).on('resize.fittext orientationchange.fittext', resizer);\r\n\r\n    });\r\n\r\n  };\r\n\r\n})( jQuery );\r\n","jQuery(document).foundation();","/*\r\nThese functions make sure WordPress\r\nand Foundation play nice together.\r\n*/\r\n\r\njQuery(document).ready(function() {\r\n\r\n    // Remove empty P tags created by WP inside of Accordion and Orbit\r\n    jQuery('.accordion p:empty, .orbit p:empty').remove();\r\n\r\n\t // Makes sure last grid item floats left\r\n\tjQuery('.archive-grid .columns').last().addClass( 'end' );\r\n\r\n\t// Adds Flex Video to YouTube and Vimeo Embeds\r\n  jQuery('iframe[src*=\"youtube.com\"], iframe[src*=\"vimeo.com\"]').each(function() {\r\n    if ( jQuery(this).innerWidth() / jQuery(this).innerHeight() > 1.5 ) {\r\n      jQuery(this).wrap(\"<div class='widescreen flex-video'/>\");\r\n    } else {\r\n      jQuery(this).wrap(\"<div class='flex-video'/>\");\r\n    }\r\n  });\r\n\r\n});\r\n","/*\n * File: iframeResizer.js\n * Desc: Force iframes to size to content.\n * Requires: iframeResizer.contentWindow.js to be loaded into the target frame.\n * Doc: https://github.com/davidjbradshaw/iframe-resizer\n * Author: David J. Bradshaw - dave@bradshaw.net\n * Contributor: Jure Mav - jure.mav@gmail.com\n * Contributor: Reed Dadoune - reed@dadoune.com\n */\n\n// eslint-disable-next-line sonarjs/cognitive-complexity, no-shadow-restricted-names\n;(function(undefined) {\n  if (typeof window === 'undefined') return // don't run for server side render\n\n  var count = 0,\n    logEnabled = false,\n    hiddenCheckEnabled = false,\n    msgHeader = 'message',\n    msgHeaderLen = msgHeader.length,\n    msgId = '[iFrameSizer]', // Must match iframe msg ID\n    msgIdLen = msgId.length,\n    pagePosition = null,\n    requestAnimationFrame = window.requestAnimationFrame,\n    resetRequiredMethods = {\n      max: 1,\n      scroll: 1,\n      bodyScroll: 1,\n      documentElementScroll: 1\n    },\n    settings = {},\n    timer = null,\n    defaults = {\n      autoResize: true,\n      bodyBackground: null,\n      bodyMargin: null,\n      bodyMarginV1: 8,\n      bodyPadding: null,\n      checkOrigin: true,\n      inPageLinks: false,\n      enablePublicMethods: true,\n      heightCalculationMethod: 'bodyOffset',\n      id: 'iFrameResizer',\n      interval: 32,\n      log: false,\n      maxHeight: Infinity,\n      maxWidth: Infinity,\n      minHeight: 0,\n      minWidth: 0,\n      resizeFrom: 'parent',\n      scrolling: false,\n      sizeHeight: true,\n      sizeWidth: false,\n      warningTimeout: 5000,\n      tolerance: 0,\n      widthCalculationMethod: 'scroll',\n      onClose: function() {\n        return true\n      },\n      onClosed: function() {},\n      onInit: function() {},\n      onMessage: function() {\n        warn('onMessage function not defined')\n      },\n      onResized: function() {},\n      onScroll: function() {\n        return true\n      }\n    }\n\n  function getMutationObserver() {\n    return (\n      window.MutationObserver ||\n      window.WebKitMutationObserver ||\n      window.MozMutationObserver\n    )\n  }\n\n  function addEventListener(el, evt, func) {\n    el.addEventListener(evt, func, false)\n  }\n\n  function removeEventListener(el, evt, func) {\n    el.removeEventListener(evt, func, false)\n  }\n\n  function setupRequestAnimationFrame() {\n    var vendors = ['moz', 'webkit', 'o', 'ms']\n    var x\n\n    // Remove vendor prefixing if prefixed and break early if not\n    for (x = 0; x < vendors.length && !requestAnimationFrame; x += 1) {\n      requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame']\n    }\n\n    if (!requestAnimationFrame) {\n      log('setup', 'RequestAnimationFrame not supported')\n    }\n  }\n\n  function getMyID(iframeId) {\n    var retStr = 'Host page: ' + iframeId\n\n    if (window.top !== window.self) {\n      if (window.parentIFrame && window.parentIFrame.getId) {\n        retStr = window.parentIFrame.getId() + ': ' + iframeId\n      } else {\n        retStr = 'Nested host page: ' + iframeId\n      }\n    }\n\n    return retStr\n  }\n\n  function formatLogHeader(iframeId) {\n    return msgId + '[' + getMyID(iframeId) + ']'\n  }\n\n  function isLogEnabled(iframeId) {\n    return settings[iframeId] ? settings[iframeId].log : logEnabled\n  }\n\n  function log(iframeId, msg) {\n    output('log', iframeId, msg, isLogEnabled(iframeId))\n  }\n\n  function info(iframeId, msg) {\n    output('info', iframeId, msg, isLogEnabled(iframeId))\n  }\n\n  function warn(iframeId, msg) {\n    output('warn', iframeId, msg, true)\n  }\n\n  function output(type, iframeId, msg, enabled) {\n    if (true === enabled && 'object' === typeof window.console) {\n      // eslint-disable-next-line no-console\n      console[type](formatLogHeader(iframeId), msg)\n    }\n  }\n\n  function iFrameListener(event) {\n    function resizeIFrame() {\n      function resize() {\n        setSize(messageData)\n        setPagePosition(iframeId)\n        on('onResized', messageData)\n      }\n\n      ensureInRange('Height')\n      ensureInRange('Width')\n\n      syncResize(resize, messageData, 'init')\n    }\n\n    function processMsg() {\n      var data = msg.substr(msgIdLen).split(':')\n\n      return {\n        iframe: settings[data[0]] && settings[data[0]].iframe,\n        id: data[0],\n        height: data[1],\n        width: data[2],\n        type: data[3]\n      }\n    }\n\n    function ensureInRange(Dimension) {\n      var max = Number(settings[iframeId]['max' + Dimension]),\n        min = Number(settings[iframeId]['min' + Dimension]),\n        dimension = Dimension.toLowerCase(),\n        size = Number(messageData[dimension])\n\n      log(iframeId, 'Checking ' + dimension + ' is in range ' + min + '-' + max)\n\n      if (size < min) {\n        size = min\n        log(iframeId, 'Set ' + dimension + ' to min value')\n      }\n\n      if (size > max) {\n        size = max\n        log(iframeId, 'Set ' + dimension + ' to max value')\n      }\n\n      messageData[dimension] = '' + size\n    }\n\n    function isMessageFromIFrame() {\n      function checkAllowedOrigin() {\n        function checkList() {\n          var i = 0,\n            retCode = false\n\n          log(\n            iframeId,\n            'Checking connection is from allowed list of origins: ' +\n              checkOrigin\n          )\n\n          for (; i < checkOrigin.length; i++) {\n            if (checkOrigin[i] === origin) {\n              retCode = true\n              break\n            }\n          }\n          return retCode\n        }\n\n        function checkSingle() {\n          var remoteHost = settings[iframeId] && settings[iframeId].remoteHost\n          log(iframeId, 'Checking connection is from: ' + remoteHost)\n          return origin === remoteHost\n        }\n\n        return checkOrigin.constructor === Array ? checkList() : checkSingle()\n      }\n\n      var origin = event.origin,\n        checkOrigin = settings[iframeId] && settings[iframeId].checkOrigin\n\n      if (checkOrigin && '' + origin !== 'null' && !checkAllowedOrigin()) {\n        throw new Error(\n          'Unexpected message received from: ' +\n            origin +\n            ' for ' +\n            messageData.iframe.id +\n            '. Message was: ' +\n            event.data +\n            '. This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.'\n        )\n      }\n\n      return true\n    }\n\n    function isMessageForUs() {\n      return (\n        msgId === ('' + msg).substr(0, msgIdLen) &&\n        msg.substr(msgIdLen).split(':')[0] in settings\n      ) // ''+Protects against non-string msg\n    }\n\n    function isMessageFromMetaParent() {\n      // Test if this message is from a parent above us. This is an ugly test, however, updating\n      // the message format would break backwards compatibity.\n      var retCode = messageData.type in { true: 1, false: 1, undefined: 1 }\n\n      if (retCode) {\n        log(iframeId, 'Ignoring init message from meta parent page')\n      }\n\n      return retCode\n    }\n\n    function getMsgBody(offset) {\n      return msg.substr(msg.indexOf(':') + msgHeaderLen + offset)\n    }\n\n    function forwardMsgFromIFrame(msgBody) {\n      log(\n        iframeId,\n        'onMessage passed: {iframe: ' +\n          messageData.iframe.id +\n          ', message: ' +\n          msgBody +\n          '}'\n      )\n      on('onMessage', {\n        iframe: messageData.iframe,\n        message: JSON.parse(msgBody)\n      })\n      log(iframeId, '--')\n    }\n\n    function getPageInfo() {\n      var bodyPosition = document.body.getBoundingClientRect(),\n        iFramePosition = messageData.iframe.getBoundingClientRect()\n\n      return JSON.stringify({\n        iframeHeight: iFramePosition.height,\n        iframeWidth: iFramePosition.width,\n        clientHeight: Math.max(\n          document.documentElement.clientHeight,\n          window.innerHeight || 0\n        ),\n        clientWidth: Math.max(\n          document.documentElement.clientWidth,\n          window.innerWidth || 0\n        ),\n        offsetTop: parseInt(iFramePosition.top - bodyPosition.top, 10),\n        offsetLeft: parseInt(iFramePosition.left - bodyPosition.left, 10),\n        scrollTop: window.pageYOffset,\n        scrollLeft: window.pageXOffset,\n        documentHeight: document.documentElement.clientHeight,\n        documentWidth: document.documentElement.clientWidth,\n        windowHeight: window.innerHeight,\n        windowWidth: window.innerWidth\n      })\n    }\n\n    function sendPageInfoToIframe(iframe, iframeId) {\n      function debouncedTrigger() {\n        trigger('Send Page Info', 'pageInfo:' + getPageInfo(), iframe, iframeId)\n      }\n      debounceFrameEvents(debouncedTrigger, 32, iframeId)\n    }\n\n    function startPageInfoMonitor() {\n      function setListener(type, func) {\n        function sendPageInfo() {\n          if (settings[id]) {\n            sendPageInfoToIframe(settings[id].iframe, id)\n          } else {\n            stop()\n          }\n        }\n\n        ;['scroll', 'resize'].forEach(function(evt) {\n          log(id, type + evt + ' listener for sendPageInfo')\n          func(window, evt, sendPageInfo)\n        })\n      }\n\n      function stop() {\n        setListener('Remove ', removeEventListener)\n      }\n\n      function start() {\n        setListener('Add ', addEventListener)\n      }\n\n      var id = iframeId // Create locally scoped copy of iFrame ID\n\n      start()\n\n      if (settings[id]) {\n        settings[id].stopPageInfo = stop\n      }\n    }\n\n    function stopPageInfoMonitor() {\n      if (settings[iframeId] && settings[iframeId].stopPageInfo) {\n        settings[iframeId].stopPageInfo()\n        delete settings[iframeId].stopPageInfo\n      }\n    }\n\n    function checkIFrameExists() {\n      var retBool = true\n\n      if (null === messageData.iframe) {\n        warn(iframeId, 'IFrame (' + messageData.id + ') not found')\n        retBool = false\n      }\n      return retBool\n    }\n\n    function getElementPosition(target) {\n      var iFramePosition = target.getBoundingClientRect()\n\n      getPagePosition(iframeId)\n\n      return {\n        x: Math.floor(Number(iFramePosition.left) + Number(pagePosition.x)),\n        y: Math.floor(Number(iFramePosition.top) + Number(pagePosition.y))\n      }\n    }\n\n    function scrollRequestFromChild(addOffset) {\n      /* istanbul ignore next */ // Not testable in Karma\n      function reposition() {\n        pagePosition = newPosition\n        scrollTo()\n        log(iframeId, '--')\n      }\n\n      function calcOffset() {\n        return {\n          x: Number(messageData.width) + offset.x,\n          y: Number(messageData.height) + offset.y\n        }\n      }\n\n      function scrollParent() {\n        if (window.parentIFrame) {\n          window.parentIFrame['scrollTo' + (addOffset ? 'Offset' : '')](\n            newPosition.x,\n            newPosition.y\n          )\n        } else {\n          warn(\n            iframeId,\n            'Unable to scroll to requested position, window.parentIFrame not found'\n          )\n        }\n      }\n\n      var offset = addOffset\n          ? getElementPosition(messageData.iframe)\n          : { x: 0, y: 0 },\n        newPosition = calcOffset()\n\n      log(\n        iframeId,\n        'Reposition requested from iFrame (offset x:' +\n          offset.x +\n          ' y:' +\n          offset.y +\n          ')'\n      )\n\n      if (window.top !== window.self) {\n        scrollParent()\n      } else {\n        reposition()\n      }\n    }\n\n    function scrollTo() {\n      if (false !== on('onScroll', pagePosition)) {\n        setPagePosition(iframeId)\n      } else {\n        unsetPagePosition()\n      }\n    }\n\n    function findTarget(location) {\n      function jumpToTarget() {\n        var jumpPosition = getElementPosition(target)\n\n        log(\n          iframeId,\n          'Moving to in page link (#' +\n            hash +\n            ') at x: ' +\n            jumpPosition.x +\n            ' y: ' +\n            jumpPosition.y\n        )\n        pagePosition = {\n          x: jumpPosition.x,\n          y: jumpPosition.y\n        }\n\n        scrollTo()\n        log(iframeId, '--')\n      }\n\n      function jumpToParent() {\n        if (window.parentIFrame) {\n          window.parentIFrame.moveToAnchor(hash)\n        } else {\n          log(\n            iframeId,\n            'In page link #' +\n              hash +\n              ' not found and window.parentIFrame not found'\n          )\n        }\n      }\n\n      var hash = location.split('#')[1] || '',\n        hashData = decodeURIComponent(hash),\n        target =\n          document.getElementById(hashData) ||\n          document.getElementsByName(hashData)[0]\n\n      if (target) {\n        jumpToTarget()\n      } else if (window.top !== window.self) {\n        jumpToParent()\n      } else {\n        log(iframeId, 'In page link #' + hash + ' not found')\n      }\n    }\n\n    function on(funcName, val) {\n      return chkEvent(iframeId, funcName, val)\n    }\n\n    function actionMsg() {\n      if (settings[iframeId] && settings[iframeId].firstRun) firstRun()\n\n      switch (messageData.type) {\n        case 'close':\n          closeIFrame(messageData.iframe)\n          break\n\n        case 'message':\n          forwardMsgFromIFrame(getMsgBody(6))\n          break\n\n        case 'autoResize':\n          settings[iframeId].autoResize = JSON.parse(getMsgBody(9))\n          break\n\n        case 'scrollTo':\n          scrollRequestFromChild(false)\n          break\n\n        case 'scrollToOffset':\n          scrollRequestFromChild(true)\n          break\n\n        case 'pageInfo':\n          sendPageInfoToIframe(\n            settings[iframeId] && settings[iframeId].iframe,\n            iframeId\n          )\n          startPageInfoMonitor()\n          break\n\n        case 'pageInfoStop':\n          stopPageInfoMonitor()\n          break\n\n        case 'inPageLink':\n          findTarget(getMsgBody(9))\n          break\n\n        case 'reset':\n          resetIFrame(messageData)\n          break\n\n        case 'init':\n          resizeIFrame()\n          on('onInit', messageData.iframe)\n          break\n\n        default:\n          resizeIFrame()\n      }\n    }\n\n    function hasSettings(iframeId) {\n      var retBool = true\n\n      if (!settings[iframeId]) {\n        retBool = false\n        warn(\n          messageData.type +\n            ' No settings for ' +\n            iframeId +\n            '. Message was: ' +\n            msg\n        )\n      }\n\n      return retBool\n    }\n\n    function iFrameReadyMsgReceived() {\n      // eslint-disable-next-line no-restricted-syntax, guard-for-in\n      for (var iframeId in settings) {\n        trigger(\n          'iFrame requested init',\n          createOutgoingMsg(iframeId),\n          document.getElementById(iframeId),\n          iframeId\n        )\n      }\n    }\n\n    function firstRun() {\n      if (settings[iframeId]) {\n        settings[iframeId].firstRun = false\n      }\n    }\n\n    var msg = event.data,\n      messageData = {},\n      iframeId = null\n\n    if ('[iFrameResizerChild]Ready' === msg) {\n      iFrameReadyMsgReceived()\n    } else if (isMessageForUs()) {\n      messageData = processMsg()\n      iframeId = messageData.id\n      if (settings[iframeId]) {\n        settings[iframeId].loaded = true\n      }\n\n      if (!isMessageFromMetaParent() && hasSettings(iframeId)) {\n        log(iframeId, 'Received: ' + msg)\n\n        if (checkIFrameExists() && isMessageFromIFrame()) {\n          actionMsg()\n        }\n      }\n    } else {\n      info(iframeId, 'Ignored: ' + msg)\n    }\n  }\n\n  function chkEvent(iframeId, funcName, val) {\n    var func = null,\n      retVal = null\n\n    if (settings[iframeId]) {\n      func = settings[iframeId][funcName]\n\n      if ('function' === typeof func) {\n        retVal = func(val)\n      } else {\n        throw new TypeError(\n          funcName + ' on iFrame[' + iframeId + '] is not a function'\n        )\n      }\n    }\n\n    return retVal\n  }\n\n  function removeIframeListeners(iframe) {\n    var iframeId = iframe.id\n    delete settings[iframeId]\n  }\n\n  function closeIFrame(iframe) {\n    var iframeId = iframe.id\n    if (chkEvent(iframeId, 'onClose', iframeId) === false) {\n      log(iframeId, 'Close iframe cancelled by onClose event')\n      return\n    }\n    log(iframeId, 'Removing iFrame: ' + iframeId)\n\n    try {\n      // Catch race condition error with React\n      if (iframe.parentNode) {\n        iframe.parentNode.removeChild(iframe)\n      }\n    } catch (error) {\n      warn(error)\n    }\n\n    chkEvent(iframeId, 'onClosed', iframeId)\n    log(iframeId, '--')\n    removeIframeListeners(iframe)\n  }\n\n  function getPagePosition(iframeId) {\n    if (null === pagePosition) {\n      pagePosition = {\n        x:\n          window.pageXOffset !== undefined\n            ? window.pageXOffset\n            : document.documentElement.scrollLeft,\n        y:\n          window.pageYOffset !== undefined\n            ? window.pageYOffset\n            : document.documentElement.scrollTop\n      }\n      log(\n        iframeId,\n        'Get page position: ' + pagePosition.x + ',' + pagePosition.y\n      )\n    }\n  }\n\n  function setPagePosition(iframeId) {\n    if (null !== pagePosition) {\n      window.scrollTo(pagePosition.x, pagePosition.y)\n      log(\n        iframeId,\n        'Set page position: ' + pagePosition.x + ',' + pagePosition.y\n      )\n      unsetPagePosition()\n    }\n  }\n\n  function unsetPagePosition() {\n    pagePosition = null\n  }\n\n  function resetIFrame(messageData) {\n    function reset() {\n      setSize(messageData)\n      trigger('reset', 'reset', messageData.iframe, messageData.id)\n    }\n\n    log(\n      messageData.id,\n      'Size reset requested by ' +\n        ('init' === messageData.type ? 'host page' : 'iFrame')\n    )\n    getPagePosition(messageData.id)\n    syncResize(reset, messageData, 'reset')\n  }\n\n  function setSize(messageData) {\n    function setDimension(dimension) {\n      if (!messageData.id) {\n        log('undefined', 'messageData id not set')\n        return\n      }\n      messageData.iframe.style[dimension] = messageData[dimension] + 'px'\n      log(\n        messageData.id,\n        'IFrame (' +\n          iframeId +\n          ') ' +\n          dimension +\n          ' set to ' +\n          messageData[dimension] +\n          'px'\n      )\n    }\n\n    function chkZero(dimension) {\n      // FireFox sets dimension of hidden iFrames to zero.\n      // So if we detect that set up an event to check for\n      // when iFrame becomes visible.\n\n      /* istanbul ignore next */ // Not testable in PhantomJS\n      if (!hiddenCheckEnabled && '0' === messageData[dimension]) {\n        hiddenCheckEnabled = true\n        log(iframeId, 'Hidden iFrame detected, creating visibility listener')\n        fixHiddenIFrames()\n      }\n    }\n\n    function processDimension(dimension) {\n      setDimension(dimension)\n      chkZero(dimension)\n    }\n\n    var iframeId = messageData.iframe.id\n\n    if (settings[iframeId]) {\n      if (settings[iframeId].sizeHeight) {\n        processDimension('height')\n      }\n      if (settings[iframeId].sizeWidth) {\n        processDimension('width')\n      }\n    }\n  }\n\n  function syncResize(func, messageData, doNotSync) {\n    /* istanbul ignore if */ // Not testable in PhantomJS\n    if (doNotSync !== messageData.type && requestAnimationFrame) {\n      log(messageData.id, 'Requesting animation frame')\n      requestAnimationFrame(func)\n    } else {\n      func()\n    }\n  }\n\n  function trigger(calleeMsg, msg, iframe, id, noResponseWarning) {\n    function postMessageToIFrame() {\n      var target = settings[id] && settings[id].targetOrigin\n      log(\n        id,\n        '[' +\n          calleeMsg +\n          '] Sending msg to iframe[' +\n          id +\n          '] (' +\n          msg +\n          ') targetOrigin: ' +\n          target\n      )\n      iframe.contentWindow.postMessage(msgId + msg, target)\n    }\n\n    function iFrameNotFound() {\n      warn(id, '[' + calleeMsg + '] IFrame(' + id + ') not found')\n    }\n\n    function chkAndSend() {\n      if (\n        iframe &&\n        'contentWindow' in iframe &&\n        null !== iframe.contentWindow\n      ) {\n        // Null test for PhantomJS\n        postMessageToIFrame()\n      } else {\n        iFrameNotFound()\n      }\n    }\n\n    function warnOnNoResponse() {\n      function warning() {\n        if (settings[id] && !settings[id].loaded && !errorShown) {\n          errorShown = true\n          warn(\n            id,\n            'IFrame has not responded within ' +\n              settings[id].warningTimeout / 1000 +\n              ' seconds. Check iFrameResizer.contentWindow.js has been loaded in iFrame. This message can be ignored if everything is working, or you can set the warningTimeout option to a higher value or zero to suppress this warning.'\n          )\n        }\n      }\n\n      if (\n        !!noResponseWarning &&\n        settings[id] &&\n        !!settings[id].warningTimeout\n      ) {\n        settings[id].msgTimeout = setTimeout(\n          warning,\n          settings[id].warningTimeout\n        )\n      }\n    }\n\n    var errorShown = false\n\n    id = id || iframe.id\n\n    if (settings[id]) {\n      chkAndSend()\n      warnOnNoResponse()\n    }\n  }\n\n  function createOutgoingMsg(iframeId) {\n    return (\n      iframeId +\n      ':' +\n      settings[iframeId].bodyMarginV1 +\n      ':' +\n      settings[iframeId].sizeWidth +\n      ':' +\n      settings[iframeId].log +\n      ':' +\n      settings[iframeId].interval +\n      ':' +\n      settings[iframeId].enablePublicMethods +\n      ':' +\n      settings[iframeId].autoResize +\n      ':' +\n      settings[iframeId].bodyMargin +\n      ':' +\n      settings[iframeId].heightCalculationMethod +\n      ':' +\n      settings[iframeId].bodyBackground +\n      ':' +\n      settings[iframeId].bodyPadding +\n      ':' +\n      settings[iframeId].tolerance +\n      ':' +\n      settings[iframeId].inPageLinks +\n      ':' +\n      settings[iframeId].resizeFrom +\n      ':' +\n      settings[iframeId].widthCalculationMethod\n    )\n  }\n\n  function setupIFrame(iframe, options) {\n    function setLimits() {\n      function addStyle(style) {\n        if (\n          Infinity !== settings[iframeId][style] &&\n          0 !== settings[iframeId][style]\n        ) {\n          iframe.style[style] = settings[iframeId][style] + 'px'\n          log(\n            iframeId,\n            'Set ' + style + ' = ' + settings[iframeId][style] + 'px'\n          )\n        }\n      }\n\n      function chkMinMax(dimension) {\n        if (\n          settings[iframeId]['min' + dimension] >\n          settings[iframeId]['max' + dimension]\n        ) {\n          throw new Error(\n            'Value for min' +\n              dimension +\n              ' can not be greater than max' +\n              dimension\n          )\n        }\n      }\n\n      chkMinMax('Height')\n      chkMinMax('Width')\n\n      addStyle('maxHeight')\n      addStyle('minHeight')\n      addStyle('maxWidth')\n      addStyle('minWidth')\n    }\n\n    function newId() {\n      var id = (options && options.id) || defaults.id + count++\n      if (null !== document.getElementById(id)) {\n        id += count++\n      }\n      return id\n    }\n\n    function ensureHasId(iframeId) {\n      if ('' === iframeId) {\n        // eslint-disable-next-line no-multi-assign\n        iframe.id = iframeId = newId()\n        logEnabled = (options || {}).log\n        log(\n          iframeId,\n          'Added missing iframe ID: ' + iframeId + ' (' + iframe.src + ')'\n        )\n      }\n\n      return iframeId\n    }\n\n    function setScrolling() {\n      log(\n        iframeId,\n        'IFrame scrolling ' +\n          (settings[iframeId] && settings[iframeId].scrolling\n            ? 'enabled'\n            : 'disabled') +\n          ' for ' +\n          iframeId\n      )\n      iframe.style.overflow =\n        false === (settings[iframeId] && settings[iframeId].scrolling)\n          ? 'hidden'\n          : 'auto'\n      switch (settings[iframeId] && settings[iframeId].scrolling) {\n        case 'omit':\n          break\n\n        case true:\n          iframe.scrolling = 'yes'\n          break\n\n        case false:\n          iframe.scrolling = 'no'\n          break\n\n        default:\n          iframe.scrolling = settings[iframeId]\n            ? settings[iframeId].scrolling\n            : 'no'\n      }\n    }\n\n    // The V1 iFrame script expects an int, where as in V2 expects a CSS\n    // string value such as '1px 3em', so if we have an int for V2, set V1=V2\n    // and then convert V2 to a string PX value.\n    function setupBodyMarginValues() {\n      if (\n        'number' ===\n          typeof (settings[iframeId] && settings[iframeId].bodyMargin) ||\n        '0' === (settings[iframeId] && settings[iframeId].bodyMargin)\n      ) {\n        settings[iframeId].bodyMarginV1 = settings[iframeId].bodyMargin\n        settings[iframeId].bodyMargin =\n          '' + settings[iframeId].bodyMargin + 'px'\n      }\n    }\n\n    function checkReset() {\n      // Reduce scope of firstRun to function, because IE8's JS execution\n      // context stack is borked and this value gets externally\n      // changed midway through running this function!!!\n      var firstRun = settings[iframeId] && settings[iframeId].firstRun,\n        resetRequertMethod =\n          settings[iframeId] &&\n          settings[iframeId].heightCalculationMethod in resetRequiredMethods\n\n      if (!firstRun && resetRequertMethod) {\n        resetIFrame({ iframe: iframe, height: 0, width: 0, type: 'init' })\n      }\n    }\n\n    function setupIFrameObject() {\n      if (settings[iframeId]) {\n        settings[iframeId].iframe.iFrameResizer = {\n          close: closeIFrame.bind(null, settings[iframeId].iframe),\n\n          removeListeners: removeIframeListeners.bind(\n            null,\n            settings[iframeId].iframe\n          ),\n\n          resize: trigger.bind(\n            null,\n            'Window resize',\n            'resize',\n            settings[iframeId].iframe\n          ),\n\n          moveToAnchor: function(anchor) {\n            trigger(\n              'Move to anchor',\n              'moveToAnchor:' + anchor,\n              settings[iframeId].iframe,\n              iframeId\n            )\n          },\n\n          sendMessage: function(message) {\n            message = JSON.stringify(message)\n            trigger(\n              'Send Message',\n              'message:' + message,\n              settings[iframeId].iframe,\n              iframeId\n            )\n          }\n        }\n      }\n    }\n\n    // We have to call trigger twice, as we can not be sure if all\n    // iframes have completed loading when this code runs. The\n    // event listener also catches the page changing in the iFrame.\n    function init(msg) {\n      function iFrameLoaded() {\n        trigger('iFrame.onload', msg, iframe, undefined, true)\n        checkReset()\n      }\n\n      function createDestroyObserver(MutationObserver) {\n        if (!iframe.parentNode) {\n          return\n        }\n\n        var destroyObserver = new MutationObserver(function(mutations) {\n          mutations.forEach(function(mutation) {\n            var removedNodes = Array.prototype.slice.call(mutation.removedNodes) // Transform NodeList into an Array\n            removedNodes.forEach(function(removedNode) {\n              if (removedNode === iframe) {\n                closeIFrame(iframe)\n              }\n            })\n          })\n        })\n        destroyObserver.observe(iframe.parentNode, {\n          childList: true\n        })\n      }\n\n      var MutationObserver = getMutationObserver()\n      if (MutationObserver) {\n        createDestroyObserver(MutationObserver)\n      }\n\n      addEventListener(iframe, 'load', iFrameLoaded)\n      trigger('init', msg, iframe, undefined, true)\n    }\n\n    function checkOptions(options) {\n      if ('object' !== typeof options) {\n        throw new TypeError('Options is not an object')\n      }\n    }\n\n    function copyOptions(options) {\n      // eslint-disable-next-line no-restricted-syntax\n      for (var option in defaults) {\n        if (Object.prototype.hasOwnProperty.call(defaults, option)) {\n          settings[iframeId][option] = Object.prototype.hasOwnProperty.call(\n            options,\n            option\n          )\n            ? options[option]\n            : defaults[option]\n        }\n      }\n    }\n\n    function getTargetOrigin(remoteHost) {\n      return '' === remoteHost || 'file://' === remoteHost ? '*' : remoteHost\n    }\n\n    function depricate(key) {\n      var splitName = key.split('Callback')\n\n      if (splitName.length === 2) {\n        var name =\n          'on' + splitName[0].charAt(0).toUpperCase() + splitName[0].slice(1)\n        this[name] = this[key]\n        delete this[key]\n        warn(\n          iframeId,\n          \"Deprecated: '\" +\n            key +\n            \"' has been renamed '\" +\n            name +\n            \"'. The old method will be removed in the next major version.\"\n        )\n      }\n    }\n\n    function processOptions(options) {\n      options = options || {}\n      settings[iframeId] = {\n        firstRun: true,\n        iframe: iframe,\n        remoteHost:\n          iframe.src &&\n          iframe.src\n            .split('/')\n            .slice(0, 3)\n            .join('/')\n      }\n\n      checkOptions(options)\n      Object.keys(options).forEach(depricate, options)\n      copyOptions(options)\n\n      if (settings[iframeId]) {\n        settings[iframeId].targetOrigin =\n          true === settings[iframeId].checkOrigin\n            ? getTargetOrigin(settings[iframeId].remoteHost)\n            : '*'\n      }\n    }\n\n    function beenHere() {\n      return iframeId in settings && 'iFrameResizer' in iframe\n    }\n\n    var iframeId = ensureHasId(iframe.id)\n\n    if (!beenHere()) {\n      processOptions(options)\n      setScrolling()\n      setLimits()\n      setupBodyMarginValues()\n      init(createOutgoingMsg(iframeId))\n      setupIFrameObject()\n    } else {\n      warn(iframeId, 'Ignored iFrame, already setup.')\n    }\n  }\n\n  function debouce(fn, time) {\n    if (null === timer) {\n      timer = setTimeout(function() {\n        timer = null\n        fn()\n      }, time)\n    }\n  }\n\n  var frameTimer = {}\n  function debounceFrameEvents(fn, time, frameId) {\n    if (!frameTimer[frameId]) {\n      frameTimer[frameId] = setTimeout(function() {\n        frameTimer[frameId] = null\n        fn()\n      }, time)\n    }\n  }\n\n  // Not testable in PhantomJS\n  /* istanbul ignore next */\n\n  function fixHiddenIFrames() {\n    function checkIFrames() {\n      function checkIFrame(settingId) {\n        function chkDimension(dimension) {\n          return (\n            '0px' ===\n            (settings[settingId] && settings[settingId].iframe.style[dimension])\n          )\n        }\n\n        function isVisible(el) {\n          return null !== el.offsetParent\n        }\n\n        if (\n          settings[settingId] &&\n          isVisible(settings[settingId].iframe) &&\n          (chkDimension('height') || chkDimension('width'))\n        ) {\n          trigger(\n            'Visibility change',\n            'resize',\n            settings[settingId].iframe,\n            settingId\n          )\n        }\n      }\n\n      Object.keys(settings).forEach(function(key) {\n        checkIFrame(settings[key])\n      })\n    }\n\n    function mutationObserved(mutations) {\n      log(\n        'window',\n        'Mutation observed: ' + mutations[0].target + ' ' + mutations[0].type\n      )\n      debouce(checkIFrames, 16)\n    }\n\n    function createMutationObserver() {\n      var target = document.querySelector('body'),\n        config = {\n          attributes: true,\n          attributeOldValue: false,\n          characterData: true,\n          characterDataOldValue: false,\n          childList: true,\n          subtree: true\n        },\n        observer = new MutationObserver(mutationObserved)\n\n      observer.observe(target, config)\n    }\n\n    var MutationObserver = getMutationObserver()\n    if (MutationObserver) {\n      createMutationObserver()\n    }\n  }\n\n  function resizeIFrames(event) {\n    function resize() {\n      sendTriggerMsg('Window ' + event, 'resize')\n    }\n\n    log('window', 'Trigger event: ' + event)\n    debouce(resize, 16)\n  }\n\n  // Not testable in PhantomJS\n  /* istanbul ignore next */\n  function tabVisible() {\n    function resize() {\n      sendTriggerMsg('Tab Visable', 'resize')\n    }\n\n    if ('hidden' !== document.visibilityState) {\n      log('document', 'Trigger event: Visiblity change')\n      debouce(resize, 16)\n    }\n  }\n\n  function sendTriggerMsg(eventName, event) {\n    function isIFrameResizeEnabled(iframeId) {\n      return (\n        settings[iframeId] &&\n        'parent' === settings[iframeId].resizeFrom &&\n        settings[iframeId].autoResize &&\n        !settings[iframeId].firstRun\n      )\n    }\n\n    Object.keys(settings).forEach(function(iframeId) {\n      if (isIFrameResizeEnabled(iframeId)) {\n        trigger(eventName, event, document.getElementById(iframeId), iframeId)\n      }\n    })\n  }\n\n  function setupEventListeners() {\n    addEventListener(window, 'message', iFrameListener)\n\n    addEventListener(window, 'resize', function() {\n      resizeIFrames('resize')\n    })\n\n    addEventListener(document, 'visibilitychange', tabVisible)\n\n    addEventListener(document, '-webkit-visibilitychange', tabVisible)\n  }\n\n  function factory() {\n    function init(options, element) {\n      function chkType() {\n        if (!element.tagName) {\n          throw new TypeError('Object is not a valid DOM element')\n        } else if ('IFRAME' !== element.tagName.toUpperCase()) {\n          throw new TypeError(\n            'Expected <IFRAME> tag, found <' + element.tagName + '>'\n          )\n        }\n      }\n\n      if (element) {\n        chkType()\n        setupIFrame(element, options)\n        iFrames.push(element)\n      }\n    }\n\n    function warnDeprecatedOptions(options) {\n      if (options && options.enablePublicMethods) {\n        warn(\n          'enablePublicMethods option has been removed, public methods are now always available in the iFrame'\n        )\n      }\n    }\n\n    var iFrames\n\n    setupRequestAnimationFrame()\n    setupEventListeners()\n\n    return function iFrameResizeF(options, target) {\n      iFrames = [] // Only return iFrames past in on this call\n\n      warnDeprecatedOptions(options)\n\n      switch (typeof target) {\n        case 'undefined':\n        case 'string':\n          Array.prototype.forEach.call(\n            document.querySelectorAll(target || 'iframe'),\n            init.bind(undefined, options)\n          )\n          break\n\n        case 'object':\n          init(options, target)\n          break\n\n        default:\n          throw new TypeError('Unexpected data type (' + typeof target + ')')\n      }\n\n      return iFrames\n    }\n  }\n\n  function createJQueryPublicMethod($) {\n    if (!$.fn) {\n      info('', 'Unable to bind to jQuery, it is not fully loaded.')\n    } else if (!$.fn.iFrameResize) {\n      $.fn.iFrameResize = function $iFrameResizeF(options) {\n        function init(index, element) {\n          setupIFrame(element, options)\n        }\n\n        return this.filter('iframe')\n          .each(init)\n          .end()\n      }\n    }\n  }\n\n  if (window.jQuery) {\n    createJQueryPublicMethod(window.jQuery)\n  }\n\n  if (typeof define === 'function' && define.amd) {\n    define([], factory)\n  } else if (typeof module === 'object' && typeof module.exports === 'object') {\n    // Node for browserfy\n    module.exports = factory()\n  }\n  window.iFrameResize = window.iFrameResize || factory()\n})()\n"]}