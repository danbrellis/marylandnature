function removeHash(){var e,n,t=window.location;"pushState"in history?history.pushState("",document.title,t.pathname+t.search):(e=document.body.scrollTop,n=document.body.scrollLeft,t.hash="",document.body.scrollTop=e,document.body.scrollLeft=n)}!function(e){e.fn.fitText=function(n,t){var i=n||1,o=e.extend({minFontSize:Number.NEGATIVE_INFINITY,maxFontSize:Number.POSITIVE_INFINITY},t);return this.each(function(){var n=e(this),t=function(){n.css("font-size",Math.max(Math.min(n.width()/(10*i),parseFloat(o.maxFontSize)),parseFloat(o.minFontSize)))};t(),e(window).on("resize.fittext orientationchange.fittext",t)})}}(jQuery),jQuery(document).foundation(),function(e){"use strict";function n(n){var t=n.outerHeight(),i=e(window).height(),o=n[0].getBoundingClientRect(),r=o.top,a=o.bottom;return Math.max(0,r>0?Math.min(t,i-r):a<i?a:i)}function t(){e(".nhsm-icon").length&&e(".nhsm-icon").each(function(){var n=e(this).height();e(this).css({width:n,height:n,lineHeight:n+1+"px"})})}e("body").hasClass("home")&&e(".collection").length&&(e(".collection-info .collector").fitText(1.2,{minFontSize:"10px",maxFontSize:"18px"}),e(".collection-info .collection-title").fitText(1.2,{minFontSize:"14px",maxFontSize:"24px"})),e(".team-card").length&&e(".team-card").each(function(){var n=e(this).find(".team-excerpt p");e(this).on("hover",function(){n.css("font-size",Math.max(Math.min(n.width()/12,parseFloat(16)),parseFloat(10)))}),n.fitText(1.2,{minFontSize:"10px",maxFontSize:"16px"})}),function(){function t(e){var o;o=1===e.next().length?e.next():i.children(":first"),n(i)?(Foundation.Motion.animateOut(e,"slideUpAndOut",function(){}),Foundation.Motion.animateIn(o,"slideUpAndIn",function(){setTimeout(function(){t(o)},3e3)})):setTimeout(function(){t(e)},3e3)}var i=e(".nhsm_scrolling_words");if(i.length){var o=Math.max.apply(Math,i.children().map(function(){return e(this).width()}).get());i.width(o),i.children("li").css("width",o),t(i.children(":first"))}}(),t(),window.onresize=function(){t()}}(jQuery),jQuery(document).ready(function(e){"use strict";if(e(".search-handler").length){var n=e(".search-handler a"),t=e("#search-modal");n.on("click",function(e){e.stopPropagation(),e.preventDefault(),t.foundation("open")})}e("#off-canvas").on("opened.zf.offcanvas",function(n){setTimeout(function(){e(".toci").addClass("open")},50)}),e("#off-canvas").on("closed.zf.offcanvas",function(n){setTimeout(function(){e(".toci").removeClass("open")},50)});var i=e("#events-full-calendar");if(i.length){var o=i.fullCalendar("getCalendar"),r=i.find(".fc-view-container");o.on("eventRender",function(e,n,t){e.appendToTitle!==!1&&n.find(".fc-content").after(e.appendToTitle),n.attr("title",e.title)}),o.on("eventAfterRender",function(n,t,i){const o="dropdown"+n.id+"_"+n.start.format("X");var r='<div class="dropdown-pane top large event-tooltip" id="'+o+'" data-dropdown data-auto-focus="true"><button class="close-button" aria-label="Close event details" type="button"><span aria-hidden="true">&times;</span></button>'+n.tooltip+"</div>";e("#events-full-calendar").after(e(r)),t.attr("data-toggle",o)}),o.on("eventAfterAllRender",function(n){e(document).foundation(),e(".dropdown-pane .close-button").on("click",function(){e(this).closest(".dropdown-pane").foundation("close")})}),e(".fc-agendaview-button").on("click",function(){window.location.href=nhsm_ajax.agenda_url}),e(".fc-center .fc-button").on("click",function(){var e,n=window.location.hash,t=i.fullCalendar("getDate"),o=window.location.pathname,r=o.split("/");e="/"+r[1]+"/"+r[2]+"/"+t.format("YYYY[/]MM[/]"),n&&(e+=n),window.history.pushState(null,null,e)}),setTimeout(function(){var n=window.location.hash,t={action:"get_event_cat_filters",active:0,security:nhsm_ajax.cal_security};e.post(nhsm_ajax.ajax_url,t,function(t){t.error?console.log(t.output):i.find(".fc-right").html(t.output),e(document).foundation();var o=e("#event-cat-filter").find("input");if(n){r.addClass("loading");var a=nhsm_ajax.ajax_url+"?action=get_events&cats="+n.substr(1);e(".event-tooltip").remove(),i.fullCalendar("removeEventSources"),i.fullCalendar("removeEvents"),i.fullCalendar("addEventSource",a);var c=n.replace("#","").split("+");o.each(function(){e.inArray(e(this).attr("id").replace("cat_",""),c)>-1&&e(this).prop("checked",!0)})}o.on("change",function(n){r.addClass("loading");var t=[];o.each(function(){e(this).prop("checked")&&t.push(e(this).attr("id").replace("cat_",""))}),t.length>0?window.location.hash=t.join("+"):removeHash();var a=nhsm_ajax.ajax_url+"?action=get_events&cats="+t.join("+");e(".event-tooltip").remove(),i.fullCalendar("removeEventSources"),i.fullCalendar("removeEvents"),i.fullCalendar("addEventSource",a)})}),i.fullCalendar("rerenderEvents")}),e(".fc-day-header span").each(function(){var n=e(this).html(),t=n.split("");t.splice(3,0,'<span class="show-for-large">'),t.push("</span>"),e(this).html(t.join(""))}),o.on("eventsReceived",function(){r.removeClass("loading")})}if(e(".add_caption_to_bg").length){var a=[];if(e(".add_caption_to_bg").each(function(n){a.push({key:n,dom:e(this),bg:e(this).css("background-image").replace("url(","").replace(")","").replace(/\"/gi,"")})}),a.length>0){var c={action:"get_img_credit",security:nhsm_ajax.img_credit_security,items:JSON.stringify(a)};e.post(nhsm_ajax.ajax_url,c,function(n){n.error?console.log(n.output):e.each(a,function(t){var i=e(n.output[t]),o=a[t].dom;o.append(i),i.css("right",o.position().left)})})}}e(".wildapricotframe").length&&e(".wildapricotframe").iFrameResize([{checkOrigin:!1,log:!0}]),e(".tabs").on("change.zf.tabs",function(){Foundation.reInit("equalizer")})}),jQuery(document).ready(function(){jQuery(".accordion p:empty, .orbit p:empty").remove(),jQuery(".archive-grid .columns").last().addClass("end"),jQuery('iframe[src*="youtube.com"], iframe[src*="vimeo.com"]').each(function(){jQuery(this).innerWidth()/jQuery(this).innerHeight()>1.5?jQuery(this).wrap("<div class='widescreen flex-video'/>"):jQuery(this).wrap("<div class='flex-video'/>")})}),function(e){function n(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function t(e,n,t){e.addEventListener(n,t,!1)}function i(e,n,t){e.removeEventListener(n,t,!1)}function o(){var e,n=["moz","webkit","o","ms"];for(e=0;e<n.length&&!q;e+=1)q=window[n[e]+"RequestAnimationFrame"];q||s("setup","RequestAnimationFrame not supported")}function r(e){var n="Host page: "+e;return window.top!==window.self&&(n=window.parentIFrame&&window.parentIFrame.getId?window.parentIFrame.getId()+": "+e:"Nested host page: "+e),n}function a(e){return P+"["+r(e)+"]"}function c(e){return V[e]?V[e].log:N}function s(e,n){l("log",e,n,c(e))}function u(e,n){l("info",e,n,c(e))}function d(e,n){l("warn",e,n,!0)}function l(e,n,t,i){!0===i&&"object"==typeof window.console&&console[e](a(n),t)}function f(e){function n(){function e(){b(U),w(Y),_("onResized",U)}r("Height"),r("Width"),x(e,U,"init")}function o(){var e=B.substr(Q).split(":");return{iframe:V[e[0]]&&V[e[0]].iframe,id:e[0],height:e[1],width:e[2],type:e[3]}}function r(e){var n=Number(V[Y]["max"+e]),t=Number(V[Y]["min"+e]),i=e.toLowerCase(),o=Number(U[i]);s(Y,"Checking "+i+" is in range "+t+"-"+n),o<t&&(o=t,s(Y,"Set "+i+" to min value")),o>n&&(o=n,s(Y,"Set "+i+" to max value")),U[i]=""+o}function a(){function n(){function e(){var e=0,n=!1;for(s(Y,"Checking connection is from allowed list of origins: "+i);e<i.length;e++)if(i[e]===t){n=!0;break}return n}function n(){var e=V[Y]&&V[Y].remoteHost;return s(Y,"Checking connection is from: "+e),t===e}return i.constructor===Array?e():n()}var t=e.origin,i=V[Y]&&V[Y].checkOrigin;if(i&&""+t!="null"&&!n())throw new Error("Unexpected message received from: "+t+" for "+U.iframe.id+". Message was: "+e.data+". This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.");return!0}function c(){return P===(""+B).substr(0,Q)&&B.substr(Q).split(":")[0]in V}function l(){var e=U.type in{"true":1,"false":1,undefined:1};return e&&s(Y,"Ignoring init message from meta parent page"),e}function f(e){return B.substr(B.indexOf(":")+A+e)}function h(e){s(Y,"onMessage passed: {iframe: "+U.iframe.id+", message: "+e+"}"),_("onMessage",{iframe:U.iframe,message:JSON.parse(e)}),s(Y,"--")}function I(){var e=document.body.getBoundingClientRect(),n=U.iframe.getBoundingClientRect();return JSON.stringify({iframeHeight:n.height,iframeWidth:n.width,clientHeight:Math.max(document.documentElement.clientHeight,window.innerHeight||0),clientWidth:Math.max(document.documentElement.clientWidth,window.innerWidth||0),offsetTop:parseInt(n.top-e.top,10),offsetLeft:parseInt(n.left-e.left,10),scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,documentHeight:document.documentElement.clientHeight,documentWidth:document.documentElement.clientWidth,windowHeight:window.innerHeight,windowWidth:window.innerWidth})}function M(e,n){function t(){F("Send Page Info","pageInfo:"+I(),e,n)}T(t,32,n)}function k(){function e(e,t){function i(){V[r]?M(V[r].iframe,r):n()}["scroll","resize"].forEach(function(n){s(r,e+n+" listener for sendPageInfo"),t(window,n,i)})}function n(){e("Remove ",i)}function o(){e("Add ",t)}var r=Y;o(),V[r]&&(V[r].stopPageInfo=n)}function j(){V[Y]&&V[Y].stopPageInfo&&(V[Y].stopPageInfo(),delete V[Y].stopPageInfo)}function C(){var e=!0;return null===U.iframe&&(d(Y,"IFrame ("+U.id+") not found"),e=!1),e}function E(e){var n=e.getBoundingClientRect();return p(Y),{x:Math.floor(Number(n.left)+Number(L.x)),y:Math.floor(Number(n.top)+Number(L.y))}}function O(e){function n(){L=r,R(),s(Y,"--")}function t(){return{x:Number(U.width)+o.x,y:Number(U.height)+o.y}}function i(){window.parentIFrame?window.parentIFrame["scrollTo"+(e?"Offset":"")](r.x,r.y):d(Y,"Unable to scroll to requested position, window.parentIFrame not found")}var o=e?E(U.iframe):{x:0,y:0},r=t();s(Y,"Reposition requested from iFrame (offset x:"+o.x+" y:"+o.y+")"),window.top!==window.self?i():n()}function R(){!1!==_("onScroll",L)?w(Y):v()}function S(e){function n(){var e=E(r);s(Y,"Moving to in page link (#"+i+") at x: "+e.x+" y: "+e.y),L={x:e.x,y:e.y},R(),s(Y,"--")}function t(){window.parentIFrame?window.parentIFrame.moveToAnchor(i):s(Y,"In page link #"+i+" not found and window.parentIFrame not found")}var i=e.split("#")[1]||"",o=decodeURIComponent(i),r=document.getElementById(o)||document.getElementsByName(o)[0];r?n():window.top!==window.self?t():s(Y,"In page link #"+i+" not found")}function _(e,n){return m(Y,e,n)}function N(){switch(V[Y]&&V[Y].firstRun&&q(),U.type){case"close":g(U.iframe);break;case"message":h(f(6));break;case"autoResize":V[Y].autoResize=JSON.parse(f(9));break;case"scrollTo":O(!1);break;case"scrollToOffset":O(!0);break;case"pageInfo":M(V[Y]&&V[Y].iframe,Y),k();break;case"pageInfoStop":j();break;case"inPageLink":S(f(9));break;case"reset":y(U);break;case"init":n(),_("onInit",U.iframe);break;default:n()}}function H(e){var n=!0;return V[e]||(n=!1,d(U.type+" No settings for "+e+". Message was: "+B)),n}function W(){for(var e in V)F("iFrame requested init",z(e),document.getElementById(e),e)}function q(){V[Y]&&(V[Y].firstRun=!1)}var B=e.data,U={},Y=null;"[iFrameResizerChild]Ready"===B?W():c()?(U=o(),Y=U.id,V[Y]&&(V[Y].loaded=!0),!l()&&H(Y)&&(s(Y,"Received: "+B),C()&&a()&&N())):u(Y,"Ignored: "+B)}function m(e,n,t){var i=null,o=null;if(V[e]){if(i=V[e][n],"function"!=typeof i)throw new TypeError(n+" on iFrame["+e+"] is not a function");o=i(t)}return o}function h(e){var n=e.id;delete V[n]}function g(e){var n=e.id;if(m(n,"onClose",n)===!1)return void s(n,"Close iframe cancelled by onClose event");s(n,"Removing iFrame: "+n);try{e.parentNode&&e.parentNode.removeChild(e)}catch(t){d(t)}m(n,"onClosed",n),s(n,"--"),h(e)}function p(n){null===L&&(L={x:window.pageXOffset!==e?window.pageXOffset:document.documentElement.scrollLeft,y:window.pageYOffset!==e?window.pageYOffset:document.documentElement.scrollTop},s(n,"Get page position: "+L.x+","+L.y))}function w(e){null!==L&&(window.scrollTo(L.x,L.y),s(e,"Set page position: "+L.x+","+L.y),v())}function v(){L=null}function y(e){function n(){b(e),F("reset","reset",e.iframe,e.id)}s(e.id,"Size reset requested by "+("init"===e.type?"host page":"iFrame")),p(e.id),x(n,e,"reset")}function b(e){function n(n){return e.id?(e.iframe.style[n]=e[n]+"px",void s(e.id,"IFrame ("+o+") "+n+" set to "+e[n]+"px")):void s("undefined","messageData id not set")}function t(n){H||"0"!==e[n]||(H=!0,s(o,"Hidden iFrame detected, creating visibility listener"),k())}function i(e){n(e),t(e)}var o=e.iframe.id;V[o]&&(V[o].sizeHeight&&i("height"),V[o].sizeWidth&&i("width"))}function x(e,n,t){t!==n.type&&q?(s(n.id,"Requesting animation frame"),q(e)):e()}function F(e,n,t,i,o){function r(){var o=V[i]&&V[i].targetOrigin;s(i,"["+e+"] Sending msg to iframe["+i+"] ("+n+") targetOrigin: "+o),t.contentWindow.postMessage(P+n,o)}function a(){d(i,"["+e+"] IFrame("+i+") not found")}function c(){t&&"contentWindow"in t&&null!==t.contentWindow?r():a()}function u(){function e(){!V[i]||V[i].loaded||l||(l=!0,d(i,"IFrame has not responded within "+V[i].warningTimeout/1e3+" seconds. Check iFrameResizer.contentWindow.js has been loaded in iFrame. This message can be ignored if everything is working, or you can set the warningTimeout option to a higher value or zero to suppress this warning."))}o&&V[i]&&V[i].warningTimeout&&(V[i].msgTimeout=setTimeout(e,V[i].warningTimeout))}var l=!1;i=i||t.id,V[i]&&(c(),u())}function z(e){return e+":"+V[e].bodyMarginV1+":"+V[e].sizeWidth+":"+V[e].log+":"+V[e].interval+":"+V[e].enablePublicMethods+":"+V[e].autoResize+":"+V[e].bodyMargin+":"+V[e].heightCalculationMethod+":"+V[e].bodyBackground+":"+V[e].bodyPadding+":"+V[e].tolerance+":"+V[e].inPageLinks+":"+V[e].resizeFrom+":"+V[e].widthCalculationMethod}function I(i,o){function r(){function e(e){1/0!==V[T][e]&&0!==V[T][e]&&(i.style[e]=V[T][e]+"px",s(T,"Set "+e+" = "+V[T][e]+"px"))}function n(e){if(V[T]["min"+e]>V[T]["max"+e])throw new Error("Value for min"+e+" can not be greater than max"+e)}n("Height"),n("Width"),e("maxHeight"),e("minHeight"),e("maxWidth"),e("minWidth")}function a(){var e=o&&o.id||Y.id+_++;return null!==document.getElementById(e)&&(e+=_++),e}function c(e){return""===e&&(i.id=e=a(),N=(o||{}).log,s(e,"Added missing iframe ID: "+e+" ("+i.src+")")),e}function u(){switch(s(T,"IFrame scrolling "+(V[T]&&V[T].scrolling?"enabled":"disabled")+" for "+T),i.style.overflow=!1===(V[T]&&V[T].scrolling)?"hidden":"auto",V[T]&&V[T].scrolling){case"omit":break;case!0:i.scrolling="yes";break;case!1:i.scrolling="no";break;default:i.scrolling=V[T]?V[T].scrolling:"no"}}function l(){"number"!=typeof(V[T]&&V[T].bodyMargin)&&"0"!==(V[T]&&V[T].bodyMargin)||(V[T].bodyMarginV1=V[T].bodyMargin,V[T].bodyMargin=""+V[T].bodyMargin+"px")}function f(){var e=V[T]&&V[T].firstRun,n=V[T]&&V[T].heightCalculationMethod in B;!e&&n&&y({iframe:i,height:0,width:0,type:"init"})}function m(){V[T]&&(V[T].iframe.iFrameResizer={close:g.bind(null,V[T].iframe),removeListeners:h.bind(null,V[T].iframe),resize:F.bind(null,"Window resize","resize",V[T].iframe),moveToAnchor:function(e){F("Move to anchor","moveToAnchor:"+e,V[T].iframe,T)},sendMessage:function(e){e=JSON.stringify(e),F("Send Message","message:"+e,V[T].iframe,T)}})}function p(o){function r(){F("iFrame.onload",o,i,e,!0),f()}function a(e){if(i.parentNode){var n=new e(function(e){e.forEach(function(e){var n=Array.prototype.slice.call(e.removedNodes);n.forEach(function(e){e===i&&g(i)})})});n.observe(i.parentNode,{childList:!0})}}var c=n();c&&a(c),t(i,"load",r),F("init",o,i,e,!0)}function w(e){if("object"!=typeof e)throw new TypeError("Options is not an object")}function v(e){for(var n in Y)Object.prototype.hasOwnProperty.call(Y,n)&&(V[T][n]=Object.prototype.hasOwnProperty.call(e,n)?e[n]:Y[n])}function b(e){return""===e||"file://"===e?"*":e}function x(e){var n=e.split("Callback");if(2===n.length){var t="on"+n[0].charAt(0).toUpperCase()+n[0].slice(1);this[t]=this[e],delete this[e],d(T,"Deprecated: '"+e+"' has been renamed '"+t+"'. The old method will be removed in the next major version.")}}function I(e){e=e||{},V[T]={firstRun:!0,iframe:i,remoteHost:i.src&&i.src.split("/").slice(0,3).join("/")},w(e),Object.keys(e).forEach(x,e),v(e),V[T]&&(V[T].targetOrigin=!0===V[T].checkOrigin?b(V[T].remoteHost):"*")}function M(){return T in V&&"iFrameResizer"in i}var T=c(i.id);M()?d(T,"Ignored iFrame, already setup."):(I(o),u(),r(),l(),p(z(T)),m())}function M(e,n){null===U&&(U=setTimeout(function(){U=null,e()},n))}function T(e,n,t){D[t]||(D[t]=setTimeout(function(){D[t]=null,e()},n))}function k(){function e(){function e(e){function n(n){return"0px"===(V[e]&&V[e].iframe.style[n])}function t(e){return null!==e.offsetParent}V[e]&&t(V[e].iframe)&&(n("height")||n("width"))&&F("Visibility change","resize",V[e].iframe,e)}Object.keys(V).forEach(function(n){e(V[n])})}function t(n){s("window","Mutation observed: "+n[0].target+" "+n[0].type),M(e,16)}function i(){var e=document.querySelector("body"),n={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0},i=new o(t);i.observe(e,n)}var o=n();o&&i()}function j(e){function n(){E("Window "+e,"resize")}s("window","Trigger event: "+e),M(n,16)}function C(){function e(){E("Tab Visable","resize")}"hidden"!==document.visibilityState&&(s("document","Trigger event: Visiblity change"),M(e,16))}function E(e,n){function t(e){return V[e]&&"parent"===V[e].resizeFrom&&V[e].autoResize&&!V[e].firstRun}Object.keys(V).forEach(function(i){t(i)&&F(e,n,document.getElementById(i),i)})}function O(){t(window,"message",f),t(window,"resize",function(){j("resize")}),t(document,"visibilitychange",C),t(document,"-webkit-visibilitychange",C)}function R(){function n(e,n){function t(){if(!n.tagName)throw new TypeError("Object is not a valid DOM element");if("IFRAME"!==n.tagName.toUpperCase())throw new TypeError("Expected <IFRAME> tag, found <"+n.tagName+">")}n&&(t(),I(n,e),i.push(n))}function t(e){e&&e.enablePublicMethods&&d("enablePublicMethods option has been removed, public methods are now always available in the iFrame")}var i;return o(),O(),function(o,r){switch(i=[],t(o),typeof r){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(r||"iframe"),n.bind(e,o));break;case"object":n(o,r);break;default:throw new TypeError("Unexpected data type ("+typeof r+")")}return i}}function S(e){e.fn?e.fn.iFrameResize||(e.fn.iFrameResize=function(e){function n(n,t){I(t,e)}return this.filter("iframe").each(n).end()}):u("","Unable to bind to jQuery, it is not fully loaded.")}if("undefined"!=typeof window){var _=0,N=!1,H=!1,W="message",A=W.length,P="[iFrameSizer]",Q=P.length,L=null,q=window.requestAnimationFrame,B={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},V={},U=null,Y={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,inPageLinks:!1,enablePublicMethods:!0,heightCalculationMethod:"bodyOffset",id:"iFrameResizer",interval:32,log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,resizeFrom:"parent",scrolling:!1,sizeHeight:!0,sizeWidth:!1,warningTimeout:5e3,tolerance:0,widthCalculationMethod:"scroll",onClose:function(){return!0},onClosed:function(){},onInit:function(){},onMessage:function(){d("onMessage function not defined")},onResized:function(){},onScroll:function(){return!0}},D={};window.jQuery&&S(window.jQuery),"function"==typeof define&&define.amd?define([],R):"object"==typeof module&&"object"==typeof module.exports&&(module.exports=R()),window.iFrameResize=window.iFrameResize||R()}}();
//# sourceMappingURL=scripts.min.js.map
